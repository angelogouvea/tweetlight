var Browser=function(){var t=navigator.userAgent;return{ie:t.match(/MSIE\s([^;]*)/)}}(),Tweetlight={init:function(t){this.url="./tweets.php?username="+t.username+"&count="+t.count,this.container=t.container,this.onComplete=t.onComplete||function(){},this.fetch()},xhr:function(){return new XMLHttpRequest},getJSON:function(t,e){var r=this,a=r.xhr();t.url=t.url||location.href,t.data=t.data||null,e=e||function(){},a.open("GET",t.url,!0),a.onreadystatechange=function(){200===a.status&&4===a.readyState&&e(a.responseText)},a.send(t.data)},loop:function(t,e){for(var r=0,a=t.length;a>r;)e(t[r],r),r+=1},fetch:function(){var t=this;t.getJSON({url:t.url},function(e){var r=JSON.parse(e),a=document.querySelector(t.container),n="";return r[0].created?(t.loop(r,function(e){n+='<li><span class="tweet">'+t.twitterLinks(e.text)+'</span><span class="created">'+t.prettyDate(e.created)+"</span></li>"}),a.innerHTML=n,void t.onComplete()):void(a.innerHTML='<li class="error">Houston, we have a problem...</li>')})},prettyDate:function(t){var e=new Date,r=new Date(t);Browser.ie&&(r=Date.parse(t.replace(/( \+)/," UTC$1")));var a=e-r,n=1e3,o=60*n,s=60*o,i=24*s;return isNaN(a)||0>a?"":7*n>a?"agora":o>a?Math.floor(a/n)+" segundos atrás":2*o>a?"1 minuto atrás":s>a?Math.floor(a/o)+" minutos atrás":2*s>a?"1 hora atrás":i>a?Math.floor(a/s)+" horas atrás":a>i&&2*i>a?"ontem":365*i>a?Math.floor(a/i)+" dias atrás":"mais de um ano"},twitterLinks:function(t){return t=t.replace(/(https?:\/\/)([\w\-:;?&=+.%#\/]+)/gi,'<a href="$1$2">$2</a>').replace(/(^|\W)@(\w+)/g,'$1<a href="https://twitter.com/$2">@$2</a>').replace(/(^|\W)#(\w+)/g,'$1<a href="https://twitter.com/search?q=%23$2">#$2</a>')}};